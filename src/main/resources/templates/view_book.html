<!doctype html>
<head>
  <title>View Book</title>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
        rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js">
  </script>
</head>
<body>

<div class="container">
  <h2>Book details</h2>
  <table class="table">
    <thead>
    <tr>
      <th>Field</th>
      <th>Value</th>
    </tr>
    </thead>
    <tbody>
    {{#book}}
    <tr>
      <th>Title</th>
      <td><input class="form-control" type="text" name="title" readonly
                 value="{{#title}}{{title}}{{/title}}"/></td>
    </tr>
    <tr>
      <th>Author</th>
      <td><input class="form-control" type="text" name="author" readonly
                 value="{{#author}}{{author}}{{/author}}"/></td>
    </tr>
    <tr>
      <th>Summary</th>
      <td><textarea class="form-control" rows=5 cols=40 name="summary"
                    readonly>{{#summary}}{{summary}}{{/summary}}</textarea>
      </td>
    </tr>
    <tr>
      <th>Publisher</th>
      <td><input class="form-control" type="text" name="publisher" readonly
                 value="{{#publisher}}{{publisher}}{{/publisher}}"/></td>
    </tr>
    <tr>
      <th>Year</th>
      <td><input class="form-control" type="text" name="published_year" readonly
                 value="{{#published_year}}{{published_year}}{{/published_year}}"/></td>
    </tr>
    {{/book}}
    </tbody>
  </table>
</div>
<div class="container">
  <h3>Comments</h3>
  <table class="table">
    <thead>
    <tr>
      <th scope="col">Username</th>
      <th scope="col">Comment</th>
      <th scope="col">Rating</th>
      <th scope="col"></th>
    </tr>
    </thead>
    {{#book.comments}}
    <tbody>
    <tr>
      <td>{{username}}</td>
      <td>{{text}}</td>
      <td>{{rating}}</td>
      <td><a href="/book/{{book.id}}/delete_comment/{{id}}" class="btn btn-danger" role="button">
        Delete</a></td>
    </tr>
    {{/book.comments}}
    </tbody>
    {{^book.comments}}
    <p>No comments yet.</p>
    {{/book.comments}}
  </table>

  <form action="/book/{{book.id}}/create_comment" method="post" name="comment">
    <div class="form-group">
      {{#comment}}
      <label for="username">Username</label>
      <input class="form-control" type="text" name="username" id="username"
             value="{{#username}}{{username}}{{/username}}" required/>
    </div>
    <div class="form-group">
      <label for="comment">Comment</label>
      <textarea class="form-control" name="text" rows="3" id="comment" required>{{#text}}{{text}}{{/text}}</textarea>
    </div>
    <div class="form-group">
      <label for="rating">Rating</label>
      <select class="form-control" name="rating" id="rating"
              value="{{#rating}}{{rating}}{{/rating}}">
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
      {{/comment}}
    </div>
    <button type="submit" class="btn btn-primary">Add comment</button>
    <a class="btn btn-primary" href="/">Back</a>
  </form>
</div>
</div>

</body>
</html>
